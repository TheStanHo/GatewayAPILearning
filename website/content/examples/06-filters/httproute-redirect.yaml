# Redirect Example
# Redirects requests to a different URL
# Useful for HTTP to HTTPS redirects, domain migrations, etc.
#
# Related Documentation: Documentation/07-request-response-modifications.md

apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: redirect-route
spec:
  parentRefs:
    - name: my-gateway
  hostnames:
    - old.example.com
  rules:
    # Example 1: Permanent redirect (301) to new domain
    - matches:
        - path:
            type: PathPrefix
            value: /
      filters:
        - type: RequestRedirect
          requestRedirect:
            scheme: https
            hostname: new.example.com
            statusCode: 301  # Permanent redirect
            # Optional: preserve path
            # path:
            #   type: ReplaceFullPath
            #   replaceFullPath: /new-path
      # No backendRefs needed for redirect
      backendRefs: []
---
# Example 2: HTTP to HTTPS redirect
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: https-redirect-route
spec:
  # Attach to HTTP listener (port 80)
  parentRefs:
    - name: http-gateway
  hostnames:
    - example.com
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /
      filters:
        - type: RequestRedirect
          requestRedirect:
            scheme: https
            statusCode: 301
      backendRefs: []

