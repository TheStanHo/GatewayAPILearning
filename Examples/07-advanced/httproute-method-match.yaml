# HTTP Method Matching Example
# Routes based on HTTP method (GET, POST, PUT, DELETE, etc.)
# Useful for separating read and write operations
#
# Related Documentation: Documentation/04-advanced-routing.md

apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: method-match-route
spec:
  parentRefs:
    - name: my-gateway
  hostnames:
    - api.example.com
  rules:
    # Write operations (POST, PUT, DELETE, PATCH)
    - matches:
        - method: POST
        - method: PUT
        - method: DELETE
        - method: PATCH
        # Multiple methods create OR logic (any of these)
      backendRefs:
        - name: write-service
          port: 80
    
    # Read operations (GET, HEAD)
    - matches:
        - method: GET
        - method: HEAD
      backendRefs:
        - name: read-service
          port: 80
    
    # OPTIONS for CORS preflight
    - matches:
        - method: OPTIONS
      backendRefs:
        - name: cors-service
          port: 80

# Supported HTTP Methods:
# - GET
# - HEAD
# - POST
# - PUT
# - DELETE
# - CONNECT
# - OPTIONS
# - TRACE
# - PATCH

